<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="style.css">
  <title>#StopAsianHate</title>

  <script src='https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css' rel='stylesheet' />
</head>

<body>

  <div id='map'></div>

  <div class='map-overlay' id='features'>
    <h2>US population density</h2>
    <div id='pd'>
      <p>Hover over a state!</p>
    </div>
  </div>

  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiZGJ1bGxpc3QiLCJhIjoiY2tsbzl2Z3g1MHIwejJ3cG1nbjFwOTVmdiJ9.Btd4mvqyAz7dL6WWQg0kjg';
    var map = new mapboxgl.Map({
      container: 'map', // container id
      style: 'mapbox://styles/dbullist/ckmp6dcc90rzx17o1j9n8foav'
    });

    map.on('load', function() {
      map.on('mousemove', function(e) {
        var tweets = map.queryRenderedFeatures(e.point, {
          layers: ['stop-asian-hate-tweets']
        });
        if (tweets.length > 0) {
          document.getElementById('pd').innerHTML = '<h3><strong>' + tweets[0].properties.text + '</strong></h3><p><strong><em>' + tweets[0].properties.name + '</strong> people per square mile</em></p>';
        } else {
          document.getElementById('pd').innerHTML = '<p>Hover over a state!</p>';
        }
      });
    });
  </script>

</body>

</html>